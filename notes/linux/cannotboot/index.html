<!doctype html><html lang=en-us><head><head><br><br><title>Cannot boot after upgrade on Debian Testing [SOLVED]</title><style>html body{font-family:ZgotmplZ,sans-serif;background-color:#fff}:root{--accent: #2196F3;--border-width:  0 }</style><link rel=stylesheet href=../../../css/main.css><link rel=stylesheet href=../../../css/perso.css><link rel=stylesheet href=../../../css/creativecommons.css><link rel=stylesheet href=../../../css/flag-icon.css><link href=https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css rel=stylesheet><link rel=stylesheet href=../../../css/font-awesome.min.css><link rel=stylesheet href=../../../css/academicons.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Changa%20One"><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script><script src=../../../js/jquery-ui-1.9.1.custom.min.js></script><script src=../../../js/jquery.tocify.min.js></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//bash.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//html.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//julia.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//r.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//xml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//yaml.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//tex.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//shell.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//matlab.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/tomorrow-night-eighties.min.css><script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: false,
    }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/latest.js?config=TeX-MML-AM_CHTML" async></script><link rel=stylesheet href=https://unpkg.com/leaflet@1.5.1/dist/leaflet.css integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin><script src=https://unpkg.com/leaflet@1.5.1/dist/leaflet.js integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin></script><meta name=generator content="Hugo 0.57.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"></head></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class=container><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav mr-auto"><li><a href=../../../publications/>Publications</a></li><li><a href=../../../talks/>Talks&amp;Posters</a></li><li><a href=../../../teaching/>Teaching</a></li><li><a href=../../../software/>Software</a></li><li><a href=../../../econotes/>EcoNotes</a></li><li><a href=../../../notes/>SilicoNotes</a></li><li><a href=../../../perso/>Perso</a></li></ul><ul class="nav navbar-nav navbar-right"><li class=navbar-icon><a href=../../../><i class="fa fa-home"></i></a></li><li class=navbar-icon><a href=https://insileco.github.io/><i class="fa fa-external-link-square"></i></a></li><li class=navbar-icon><a href=https://www.github.com/KevCaz><i class="fa fa-github"></i></a></li></ul></ul></div></div></nav><br><div class=container><div class=row><div class=col-sm-2><div class="hidden-sm hidden-xs"></div></div><div class=col-sm-10><div class=article-meta><h1><span class=title>Cannot boot after upgrade on Debian Testing [SOLVED]</span></h1><h3><span class=subtitle></span></h3><h3 class=date style=font-size:1.25em>December 17, 2018</h2><p class=tags><i class="fa fa-tags" aria-hidden=true></i>&nbsp;
<a href=../../../tags/linux><kbd class=item-tag>Linux</kbd></a>
<a href=../../../tags/debian-testing><kbd class=item-tag>Debian Testing</kbd></a>
<a href=../../../tags/boot><kbd class=item-tag>boot</kbd></a>
<a href=../../../tags/bios><kbd class=item-tag>BIOS</kbd></a>
<a href=../../../tags/uefi><kbd class=item-tag>UEFI</kbd></a>
<a href=../../../tags/grub2><kbd class=item-tag>GRUB2</kbd></a></p><br></div><p>Yesterday, I upgraded some packages on my Debian machine as I regularly do (cannot remember the exact list) but when I rebooted the system, I was not able to access the file system anymore ðŸ˜±.</p><p>It was the first time I had no clue about what I did wrong and also the first time I had no idea of what to do. Basically, every time I started my computer, I ended up on a page I had never seen before where I had only two options:</p><ol><li>select the device to boot on;</li><li>test the hardware.</li></ol><p>I tested the hardware, everything was normal so I came to the conclusion that the problem was with option 1: I was not able to access the file system that I knew was on my Samsung hard drive but it was not possible to access it. From this and dozens of queries on Google I figured out that something was wrong with <a href=https://en.wikipedia.org/wiki/GNU_GRUB target=_blank>GNU GRUB</a>.</p><p>GNU GRUB stands for &ldquo;GNU Rand Unified Bootloader&rdquo;, as explained in the <a href=https://www.gnu.org/software/grub/manual/grub/grub.html#Overview target=_blank>GNU GRUB manual</a> it is</p><blockquote><p>[&hellip;] a boot loader is the first software program that runs when a computer starts. It is responsible for loading and transferring control to an operating system kernel software (such as Linux or GNU Mach). The kernel, in turn, initializes the rest of the operating system (e.g. a GNU system).</p></blockquote><p>According to the same manual:</p><blockquote><p>GNU GRUB is a very powerful boot loader, which can load a wide variety of free operating systems, as well as proprietary operating systems with chain-loading.</p></blockquote><p>A computer&rsquo;s hardware is controlled by <a href=https://en.wikipedia.org/wiki/Firmware target=_blank>firmware</a> that are initialized by a the <a href=https://en.wikipedia.org/wiki/BIOS target=_blank>BIOS</a> which is replaced by the <a href=https://en.wikipedia.org/wiki/Unified_Extensible_Firmware_Interface target=_blank>UEFI</a>
in recent computers. As explained in this article on <a href=https://www.maketecheasier.com/differences-between-uefi-and-bios/ target=_blank>Make Tech Easier</a>:</p><blockquote><p>BIOS and UEFI are two firmware interfaces for computers which work as an interpreter between the operating system and the computer firmware. Both of these interfaces are used at the startup of the computer to initialize the hardware components and start the operating system which is stored on the hard drive.</p><p>BIOS works by reading the first sector of the hard drive which has the next deviceâ€™s address to initialize or code to execute. BIOS also selects the boot device that needs to be initialized for starting the operating system. Since BIOS has been in use since the very beginning, it still works in 16-bit mode, limiting the amount of code that can be read and executed from the firmware ROM.</p><p>UEFI does the same task a little differently. It stores all the information about initialization and startup in an .efi file instead of the firmware. This file is stored on the hard drive inside a special partition called EFI System Partition (ESP). The ESP partition will also contain the boot loader programs for the Operating System installed on the computer.</p></blockquote><p>Basically the BIOS or the UEFI initializes the necessary system hardware for booting and then the boot loader (so GNU GRUB here) is launched
(<a href=https://wiki.archlinux.org/index.php/Arch_boot_process#Under_UEFI target=_blank>see this article of the archlinuxwiki for more details</a>). There was nothing wrong with the UEFI, I deduced from this that there was something wrong with GNU GRUB.</p><p>I did not know how to process but I read that <a href=https://wiki.debian.org/DebianInstaller/Rescue target=_blank>the Debian Installer can be used to rescue systems</a>. I therefore downloaded <a href=https://cdimage.debian.org/cdimage/weekly-builds/amd64/iso-dvd/ target=_blank>the latest DVD image of Debian Testing</a> and <a href=https://cdimage.debian.org/cdimage/weekly-builds/amd64/iso-dvd/ target=_blank>created a bootable USB stick with it</a>. I plugged it to my computer and try different approaches. First I tried to use the rescue mode (in the advanced on the &lsquo;live install&rsquo; image) by clicking on rescue mode in the <code>Advanced options</code> section:</p><center><img src=https://i.stack.imgur.com/UzxgF.png></center><p><br></p><p>I was a bit lost and did not succeed at the first attempt. Then I found <a href=https://www.linux.com/learn/how-rescue-non-booting-grub-2-linux%20%20 target=_blank>this tutorial on linux.com</a>
and tried it (starting by typing <code>C</code> when the screen above popped up).
Again, I was a bit confused because I always ended up in <a href=https://en.wikipedia.org/wiki/BusyBox target=_blank>BusyBox</a> and everything I tried was unsuccessful. I finally solved the issue by reinstalling GNU GRUB following the steps of this <a href=https://www.tecmint.com/rescue-repair-and-reinstall-grub-boot-loader-in-ubuntu/ target=_blank>great tutorial on TecMint</a> (it is for Ubuntu but Ubuntu is based on Debian). After the re-installation everything went back to normal ðŸ˜„.</p><p>Once again I learned a lot by solving this issue but this time it was not a good timing for me at all&hellip; Anyway, now I will keep an live install ready to rescue my system. Also I now understand why there are three partitions on my Samsung hard drive: one for the file system, one for the SWAP and one for the UEFI!</p></div></div></div><br><br><footer><div class=row><div class=col-sm-3><div class="hidden-sm hidden-xs"></div></div><div class=col-sm-8><div class=row><hr><div class=col-sm-10 style=text-align:center>Personnal website built with <i class="icon ion-md-heart"></i>, <a href=https://gohugo.io/>Hugo</a>
and my <a href=https://github.com/KevCaz/hugo-KevCaz>own theme</a>!
<i class="fa fa-code" aria-hidden=true></i>available on
<a href=https://github.com/KevCaz/KevCaz.github.io><i class="fa fa-github" aria-hidden></i></a>.<br>All content is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/><i class="cc cc-cc-circle cc-1x"></i><i class="cc cc-by-circle cc-1x"></i><i class="cc cc-nc-circle cc-1x"></i><i class="cc cc-sa-circle cc-1x"></i></a>unless otherwise specified.</div><div class=col-sm-2><a href=#><i class="fa fa-arrow-circle-o-up fa-2x" aria-hidden=true></i></a><br><br></div><div></div></div><br></footer></body></html>