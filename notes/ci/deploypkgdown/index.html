<!DOCTYPE html>
<html lang="en-us">

<head>

  <head>

    <br><br>
    <title>Deploy a pkgdown on gh-pages</title>

    
    <style>

    html body {
        font-family: ZgotmplZ, sans-serif;
        background-color: white;
    }

    :root {
        --accent: #2196F3;
        --border-width:  0 ;
    }

</style>


<link rel="stylesheet" href="../../../css/main.css">


<link rel="stylesheet" href="../../../css/perso.css">

<link rel="stylesheet" href="../../../css/creativecommons.css">

<link rel="stylesheet" href="../../../css/flag-icon.css">


<link href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" rel="stylesheet">

<link rel="stylesheet" href="../../../css/font-awesome.min.css">

<link rel="stylesheet" href="../../../css/academicons.min.css" />


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Changa%20One">


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="../../../js/jquery-ui-1.9.1.custom.min.js"></script>
<script src="../../../js/jquery.tocify.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">




     










<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//bash.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//html.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//julia.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//python.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//r.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//rust.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//xml.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//yaml.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//tex.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//shell.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages//matlab.min.js"></script>


<script>
  hljs.initHighlightingOnLoad();
</script>


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/tomorrow-night-eighties.min.css">






<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: false,
    }
    });
    </script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/latest.js?config=TeX-MML-AM_CHTML' async></script>





<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js" integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og==" crossorigin=""></script>


    <meta name="generator" content="Hugo 0.53" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
</head>


<body>

  <nav class="navbar navbar-default navbar-fixed-top">

    <div class="container">

      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>


      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

        
        <ul class="nav navbar-nav mr-auto">
          
          
          <li><a href="../../../publications/">Publications</a></li>
          


          
          
          <li><a href="../../../talks/">Talks&amp;Posters</a></li>
          


          
          
          <li><a href="../../../teaching/">Teaching</a></li>
          


          
          
          <li><a href="../../../software/">Software</a></li>
          


          
          
          <li><a href="../../../econotes/">EcoNotes</a></li>
          


          
          
          <li><a href="../../../notes/">SilicoNotes</a></li>
          


          
          
          <li><a href="../../../perso/">Perso</a></li>
          


          
        </ul>
        

        
        <ul class="nav navbar-nav navbar-right">
          
          <li class="navbar-icon"> <a href="../../../"><i class="fa fa-home"></i></a></li>
          
          <li class="navbar-icon"> <a href="https://insileco.github.io/"><i class="fa fa-external-link-square"></i></a></li>
          
          <li class="navbar-icon"> <a href="https://www.github.com/KevCaz"><i class="fa fa-github"></i></a></li>
          
        </ul>
        

        </ul>

      </div>

    </div>

  </nav>

  <br>



<div class="container">

  <div class="row">

    <div class="col-sm-2">
      <div class="hidden-sm hidden-xs">

        

        

      </div>
    </div>

    <div class="col-sm-10">

      

<div class="article-meta">
  <h1><span class="title">Deploy a pkgdown on gh-pages</span></h1>
  <h3><span class="subtitle"></span></h3>
  
  <h3 class="date" style="font-size: 1.25em;">October 22, 2019</h2>

  
  
    <p class="tags">
      <i class="fa fa-tags" aria-hidden="true"></i> &nbsp;
      
        <a href="../../../tags/continuous-integration"> <kbd class="item-tag">continuous integration</kbd></a>
      
        <a href="../../../tags/travis"> <kbd class="item-tag">Travis</kbd></a>
      
        <a href="../../../tags/github-pages"> <kbd class="item-tag">GitHub pages</kbd></a>
      
        <a href="../../../tags/website"> <kbd class="item-tag">website</kbd></a>
      
        <a href="../../../tags/r"> <kbd class="item-tag">R</kbd></a>
      
        <a href="../../../tags/pkgdown"> <kbd class="item-tag">pkgdown</kbd></a>
      
    </p>
  
  

  
  
  

  <br>

</div>

<p>There are three ways to <a href="https://help.github.com/en/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site" target="_blank">deploy a website on your GitHub pages</a> :</p>

<ol>
<li>using the <code>gh-pages</code>;</li>
<li>using the folder <code>docs</code> on your master branch;</li>
<li>using the master branch.</li>
</ol>

<p>I frequently use the GitHub pages to deploy the <a href="https://github.com/r-lib/pkgdown" target="_blank">pkgdown</a> websites I create for my R packages. For a while, I was using the <code>docs/</code> folder where the website is generated by default. But I figured that this way has two main drawbacks:</p>

<ol>
<li>I needed to rebuild the package locally after (pretty much) any change in the package;</li>
<li>it adds a huge amount of changes in the commit history.</li>
</ol>

<p>That&rsquo;s why I&rsquo;ve decided to make <a href="https://travis-ci.org/" target="_blank">Travis</a> build the
website and deploy it on the <code>gh-branch</code> (many developers smartly use this
approach which actually is the default branch for Travis). After tweaking
<code>travis.yml</code> (see [Travis documentation about this]) I ran into two problems.
First, I needed a deploy key:</p>

<pre><code class="language-r">Error: No deploy key found, please setup with `travis::use_travis_deploy()`
</code></pre>

<p>I read the error message and fixed it ðŸ˜„!. The second one was slightly more difficult (to me): the <code>gh-branch</code> had to be empty and as I created <code>gh-pages</code> from <code>master</code> it wasn&rsquo;t! So, I&rsquo;ve got the following error message:</p>

<pre><code>Error: callr subprocess failed: '/tmp/RtmpDinJqC/file409c3dd473be' is non-empty and not built by pkgdown

Execution halted

Script failed with status 1
</code></pre>

<p>see <a href="https://travis-ci.org/KevCaz/seedlingsRecruitment/builds/598866219#L1432" target="_blank">this job</a> if you want to check out the full console log.</p>

<p>Fortunately, the solution to fix this issue <a href="https://pkgdown.r-lib.org/reference/deploy_site_github.html" target="_blank">is well explained on the pkgdown
website</a>. Following
the guidelines provided, you should actually get away from the two issues I
described above ðŸ˜‰!</p>




    </div>

  </div>

</div>


  <br><br>

  <footer>

    <div class="row">

      <div class="col-sm-3">
        <div class="hidden-sm hidden-xs">
        </div>
      </div>

      <div class="col-sm-8">

        <div class="row">

  <hr>

  <div class="col-sm-10" style="text-align: center">

    Personnal website built with <i class="icon ion-md-heart"></i>, <a href = "https://gohugo.io/">Hugo</a>
    and my <a href = "https://github.com/KevCaz/hugo-KevCaz">own theme</a>!

    <i class="fa fa-code" aria-hidden="true"></i> available on
    <a href = "https://github.com/KevCaz/KevCaz.github.io"><i class="fa fa-github" aria-hidden></i></a>.

    <br>
    All content is licensed under
    <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/'>
       <i class='cc cc-cc-circle cc-1x'></i> <i class='cc cc-by-circle cc-1x'></i>
       <i class='cc cc-nc-circle cc-1x'></i> <i class='cc cc-sa-circle cc-1x'></i>
    </a>
    unless otherwise specified.

  </div>


  <div class="col-sm-2">
    <a href="#"> <i class="fa fa-arrow-circle-o-up fa-2x" aria-hidden="true"></i> </a>
    <br><br>
  </div>


<div>

        

      </div>

    </div>

  <br>
  </footer>

  </body>

</html>

